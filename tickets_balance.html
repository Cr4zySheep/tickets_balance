<head>
  <title>Tickets balance</title>
</head>

<template name="home">
	{{> loginButtons}}
	<div>
		{{#if currentUser}}
			{{> solde}}
			{{> aboList}}
			{{> presenceTab}}
			{{> purchaseList}}
		{{/if}}
	</div>
</template>

<template name="aboList">
	<h1>Liste des abonnements ({{aboCount}})</h1>
	{{#each getAbo}}
		{{> abo}}
	{{/each}}
</template>

<template name="abo">
	<h2>Abonnement :</h2>
	<ul>
		<li><p>Acheté le : {{createdDate}}</p></li>
		{{#if hadStarted}}
			<li><p>Commencé le : {{startedDate}}</p></li>
			<li><p>Fini le : {{finishedDate}}</p></li>
		{{else}}
			<li><form class='abo'>
				<input id='{{createdAt}}' name='startedDate' class='datepicker'/>
				<input type='submit'/>
			</form></li>
		{{/if}}
	</ul>
</template>

<template name="solde">
	<h1>Solde :</h1>
	<p>Tickets restants : {{ticketsRest}}</p>
</template>

<template name="presenceTab">
		<h1>Liste des présences ({{presenceCount}})</h1>
		{{#each getPresence}}
			{{> presence}}
		{{/each}}
</template>

<template name="presence">
	<p>Vous avez été présent le : {{date}} ({{amount}} ticket utilisé).</p>
</template>

<template name="purchaseList">
	<h1>Liste des achats ({{purchaseCount}})</h1>

	<ul>
		{{#each getPurchase}}
			{{> purchase}}
		{{/each}}
	</ul>
</template>

<template name="purchase">
  <li>
  	{{#if tickets}}
  		<p>Vous avez acheté {{tickets}} ticket(s) le {{createdAt}}.</p>
  	{{else}}
  		<p>Vous avez acheté un abonnement d'un mois le {{createdAt}}.</p>
  	{{/if}}
  </li>
</template>